<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- faq namespace -->
<mapper namespace="faq">
	
	<resultMap type="faqModel" id="faqModelRes">
		<result property="faq_no" column="faq_no" />
		<result property="faq_subject" column="faq_subject" />
		<result property="faq_content" column="faq_content" />
		<result property="faq_hit" column="faq_hit" />
		<result property="faq_date" column="faq_date" />
	
	</resultMap>
	<!-- 공동 select -->
	<sql id="select-all">
		select * from faq
	</sql>
	
	<!-- 글목록 -->
	<select id="faqList" resultMap="faqModelRes">
		<include refid="select-all" />
		order by faq_no desc
	</select>
	
	<!-- 글 상세보기 -->
	<select id="faqView" parameterType="int" resultMap="faqModelRes">
		<include refid="select-all" />
		where faq_no = #{faq_no}
	</select>
	
	<!-- 글 작성 -->
	<insert id="faqWrite" parameterType="faqModel">
		insert into faq(faq_no, faq_subject, faq_content, faq_date)
		values (faq_no_seq.NEXTVAL, #{faq_subject}, #{faq_content}, sysdate)
	</insert>
	
	<!--조회수 증가 -->
	<update id="faqHitUpdate">
		update faq
		set faq_hit = faq_hit + 1
		where faq_no = #{faq_no}
	</update> 
	
	<!-- 글 수정 -->
	<update id="faqUpdate" parameterType="faqModel">
		update faq
		set faq_subject = #{faq_subject}, faq_content = #{faq_content}, faq_date = sysdate
		where faq_no = #{faq_no}
	</update>
	
	<!-- 글 삭제 -->
	<update id="faqDelete">
		delete from faq 
		where faq_no = #{faq_no}
	</update>
	
	<!-- 게시글 모든검색 -->
	<select id="searchAll" parameterType="String" resultMap="faqModelRes">
		select * from faq
		where faq_subject like '%'||#{isSearch}||'%' or faq_content like '%'||#{isSearch}||'%'
		order by faq_no desc
	</select>
	
</mapper>
