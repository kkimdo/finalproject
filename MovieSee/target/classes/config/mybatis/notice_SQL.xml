<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 공지사항 namespace -->
<mapper namespace="notice">
	
	<resultMap type="noticeModel" id="noticeModelRes">
		<result property="notice_no" column="notice_no" />
		<result property="notice_subject" column="notice_subject" />
		<result property="notice_content" column="notice_content" />
		<result property="notice_hit" column="notice_hit" />
		<result property="notice_date" column="notice_date" />
		<result property="notice_area" column="notice_area" />
	</resultMap>
	
	<sql id="select-all">
		select * from notice
	</sql>
	
	<!-- 게시글 목록 -->
	<select id="noticeList" resultMap="noticeModelRes">
		<include refid="select-all" />
		order by notice_no desc
	</select>
	
	<!-- 게시글 상세보기 -->
	<!-- parameterType 은 notice_no의 값을 어디서 가져오는지 즉, noticeModel 클래스에서 가져온다는 뜻 -->
	<select id="noticeView" parameterType="noticeModel" resultMap="noticeModelRes">
		<include refid="select-all" />
		where notice_no = #{notice_no}
	</select>
	
	<!-- 게시글 작성 -->
	<insert id="noticeWrite" parameterType="noticeModel">
		insert into notice(notice_no, notice_subject, notice_content, notice_date, notice_area)
		values (notice_no_seq.NEXTVAL, #{notice_subject}, #{notice_content}, sysdate, #{notice_area})
	</insert>
	
	<!-- 게시글 조회수 증가 -->
	<update id="noticeHitUpdate">
		update notice
		set notice_hit = notice_hit + 1
		where notice_no = #{notice_no}
	</update>
	
	<!-- 게시글 수정 -->
	<update id="noticeUpdate" parameterType="noticeModel">
		update notice
		set notice_subject = #{notice_subject}, notice_content = #{notice_content}, notice_area = #{notice_area}, notice_date = sysdate
		where notice_no = #{notice_no}
	</update>
	
	<!-- 게시글 삭제 -->
	<delete id="noticeDelete">
		delete from notice
		where notice_no = #{notice_no}
	</delete>
	
	<!-- 게시글 제목으로 검색 -->
	<select id="searchList0" parameterType="String" resultMap="noticeModelRes">
		<include refid="select-all" />
		where notice_subject like #{isSearch} order by notice_no desc
	</select>
	
	<!-- 게시글 내용으로 검색 -->
	<select id="searchList1" parameterType="String" resultMap="noticeModelRes">
		<include refid="select-all" />
		where notice_content like #{isSearch} order by notice_no desc
	</select>
	
	
</mapper>
